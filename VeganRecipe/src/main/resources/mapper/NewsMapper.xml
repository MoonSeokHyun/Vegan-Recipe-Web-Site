<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.vegan.recipe.news.mapper.INewsMapper">
     
     	<sql id="search">
		<if test="condition == 'Vboard_title'">
			WHERE Vboard_title LIKE CONCAT('%',#{keyword},'%')
		</if>
		<if test="condition == 'Vboard_content'">
			WHERE Vboard_content LIKE CONCAT('%',#{keyword},'%')
		</if>
		<if test="condition == 'Vboard_writer'">
			WHERE Vboard_writer LIKE CONCAT('%',#{keyword},'%')
		</if>
	</sql>
     	
     <insert id="newsInsert">
     	insert into Vegan_board(
     	Vboard_no,
     	Vboard_title,
     	Vboard_writer,
     	Vboard_content,
     	Vboard_hit,
     	Vboard_like,
     	Vboard_type
     	) values ((select * from (select max(Vboard_no)+1 from Vegan_board) next ),
     	#{Vboard_title},#{Vboard_writer},#{Vboard_content},0,0,0)
    
     </insert>
     
     <select id="listNews" resultType="com.vegan.recipe.news.VboardVO">
     	select * from Vegan_board
     	<include refid="search" />
     	order by Vboard_no desc
     	limit #{pagecnt} ,  #{countPerPage}
     </select>
     
     <select id="Total" resultType="int">
     	select count(*) from Vegan_board
     	<include refid="search" />
     </select>
     
     <select id="newsDetail" resultType="com.vegan.recipe.news.VboardVO" >
     	select * from Vegan_board where Vboard_no = #{Vboard_no}
     </select>
  </mapper>
  
  
  
  
  
  
  
  
  
  
  
  
  